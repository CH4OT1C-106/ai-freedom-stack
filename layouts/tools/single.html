{{ define "main" }}
<article class="tool-single container">
  <div class="tool-category" style="color: var(--text-muted); text-transform: uppercase; font-size: 0.8rem; letter-spacing: 0.05em; margin-bottom: var(--space-sm);">{{ .Params.category }}</div>
  <h1>{{ .Title }}</h1>

  {{/* Answer Capsule */}}
  {{ with .Params.answer_capsule }}
  <div class="answer-capsule" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border-left: 4px solid var(--accent, #6c63ff); padding: 1.25rem 1.5rem; margin: 1.5rem 0; border-radius: 0 8px 8px 0; font-size: 1.05rem; line-height: 1.6;">
    {{ . }}
  </div>
  {{ end }}

  {{/* Freedom Score Breakdown */}}
  {{ with .Params.freedom_score }}
  {{ $score := . }}
  {{ $color := "#ef4444" }}{{ $label := "Trap Tool" }}{{ $emoji := "ğŸ”´" }}
  {{ if ge $score 9 }}{{ $color = "#22c55e" }}{{ $label = "Freedom First" }}{{ $emoji = "ğŸŸ¢" }}
  {{ else if ge $score 7 }}{{ $color = "#22c55e" }}{{ $label = "Builder Friendly" }}{{ $emoji = "ğŸŸ¢" }}
  {{ else if ge $score 5 }}{{ $color = "#eab308" }}{{ $label = "Proceed with Caution" }}{{ $emoji = "ğŸŸ¡" }}
  {{ else if ge $score 3 }}{{ $color = "#f97316" }}{{ $label = "Leash Detected" }}{{ $emoji = "ğŸŸ " }}
  {{ end }}
  <div class="freedom-card" style="background: var(--bg-card); border: 1px solid var(--border-default); border-radius: var(--radius-md, 8px); padding: 1.25rem 1.5rem; margin: 1.5rem 0;">
    <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem;">
      <span style="font-weight: 700; font-size: 1.1rem;">ğŸ›¡ï¸ Freedom Score</span>
      <span class="freedom-badge" style="display: inline-flex; align-items: center; gap: 0.4rem; padding: 0.35rem 0.8rem; border: 2px solid {{ $color }}; border-radius: 999px; font-weight: 700; font-size: 0.95rem;">
        {{ $emoji }} {{ $score }}/10 â€” {{ with $.Params.freedom_label }}{{ . }}{{ else }}{{ $label }}{{ end }}
      </span>
    </div>
    <div class="freedom-factors" style="display: grid; gap: 0.5rem;">
      {{ with $.Params.fs_lockin }}<div class="freedom-row"><span class="freedom-factor-label">ğŸ”’ Vendor Lock-in</span><span class="freedom-stars">{{ partial "stars.html" . }}</span></div>{{ end }}
      {{ with $.Params.fs_solo }}<div class="freedom-row"><span class="freedom-factor-label">ğŸ§‘â€ğŸ’» Solo Builder Fit</span><span class="freedom-stars">{{ partial "stars.html" . }}</span></div>{{ end }}
      {{ with $.Params.fs_cost }}<div class="freedom-row"><span class="freedom-factor-label">ğŸ’° Cost Efficiency</span><span class="freedom-stars">{{ partial "stars.html" . }}</span></div>{{ end }}
      {{ with $.Params.fs_portability }}<div class="freedom-row"><span class="freedom-factor-label">ğŸ”„ Portability</span><span class="freedom-stars">{{ partial "stars.html" . }}</span></div>{{ end }}
      {{ with $.Params.fs_opensource }}<div class="freedom-row"><span class="freedom-factor-label">ğŸ“– Open Source</span><span class="freedom-stars">{{ partial "stars.html" . }}</span></div>{{ end }}
    </div>
  </div>
  {{ end }}

  {{/* Quick Specs Table */}}
  <div class="quick-specs" style="margin: 1.5rem 0; border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; overflow: hidden;">
    <table style="width: 100%; border-collapse: collapse; font-size: 0.95rem;">
      {{ with .Params.price }}<tr><td style="padding: 0.6rem 1rem; font-weight: 600; width: 40%; border-bottom: 1px solid rgba(255,255,255,0.06);">ğŸ’° Price</td><td style="padding: 0.6rem 1rem; border-bottom: 1px solid rgba(255,255,255,0.06);">{{ . }}</td></tr>{{ end }}
      {{ with .Params.free_tier }}<tr><td style="padding: 0.6rem 1rem; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.06);">ğŸ†“ Free Tier</td><td style="padding: 0.6rem 1rem; border-bottom: 1px solid rgba(255,255,255,0.06);">{{ . }}</td></tr>{{ end }}
      {{ with .Params.category }}<tr><td style="padding: 0.6rem 1rem; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.06);">ğŸ“‚ Category</td><td style="padding: 0.6rem 1rem; border-bottom: 1px solid rgba(255,255,255,0.06);">{{ . }}</td></tr>{{ end }}
      {{ with .Params.freedom_score }}<tr><td style="padding: 0.6rem 1rem; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.06);">ğŸ›¡ï¸ Freedom Score</td><td style="padding: 0.6rem 1rem; border-bottom: 1px solid rgba(255,255,255,0.06);">{{ . }}/10 {{ with $.Params.freedom_label }}({{ . }}){{ end }}</td></tr>{{ end }}
      {{ with .Params.last_tested }}<tr><td style="padding: 0.6rem 1rem; font-weight: 600;">ğŸ§ª Last Tested</td><td style="padding: 0.6rem 1rem;">{{ . }}</td></tr>{{ end }}
    </table>
  </div>

  <p style="color: var(--text-muted); font-size: 0.9rem;">Last updated: {{ .Date.Format "January 2, 2006" }}</p>
  
  <div class="verdict">
    <strong>Verdict:</strong> {{ .Params.verdict }}
  </div>

  {{ .Content }}

  {{ with .Params.affiliate_url }}
  <div style="text-align: center; margin: var(--space-2xl) 0;">
    <a href="{{ . }}" class="btn btn-primary" target="_blank" rel="nofollow sponsored">Try {{ $.Title }} â†’</a>
  </div>
  {{ end }}
</article>
{{ end }}
